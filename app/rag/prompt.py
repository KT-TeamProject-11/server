# app/rag/prompt.py
from textwrap import dedent

# 스타일 가이드는 즉시 완성된 상수로 둡니다.
STYLE_GUIDE = dedent("""
[톤 & 원칙]
- 공공기관 안내 톤: 정중한 존댓말, 과장 금지, 사실 확인 우선
- 간결·명확: 핵심 위주 2~6문장, 필요하면 불릿으로 정리
- 안전: 문서/링크 등 '근거'가 없는 내용은 추측하지 말 것
- 링크는 반드시 하이퍼링크(앵커)로 표기
- 전화번호/일반 안내 문구는 '근거가 없을 때' 넣지 말 것
""").strip()

# 아래 두 템플릿은 "그대로 템플릿"으로 보관합니다.
# 즉, 여기서는 .format(...)을 호출하지 않습니다. (나중에 LLM 호출 직전에 치환)
PROMPT_SINGLE = dedent("""
{style}

[지침]
- 아래 컨텍스트에 포함된 사실과 URL만 사용해 답하세요.
- 컨텍스트에 URL이 있으면 반드시 링크 형태로 넣으세요.
- 컨텍스트에 충분한 근거가 없으면 "해당 내용은 홈페이지에서 찾을수 없어 대표전화 041-417-4061~5로 연락부탁드립니다."라고만 답하고 추측/광범위 안내/전화번호는 넣지 마세요.

[컨텍스트]
{context}

[질문]
{question}

[답변]
""").strip()

PROMPT_FUSION = dedent("""
{style}

[지침]
- 아래의 (1)로컬 문서, (2)룰(별칭/태그), (3)웹검색 중 사실로 확인되는 내용만 답변에 사용하세요.
- (2)에서 특정 페이지가 확정되면 그 URL을 가장 먼저 제시하세요.
- 링크는 반드시 하이퍼링크로 표기하세요.
- 근거가 부족하면 "해당 내용은 홈페이지에서 찾을수 없어 대표전화 041-417-4061~5로 연락부탁드립니다."라고만 답하세요(추측/전화번호 금지).

(1) 로컬 문서:
{local_ctx}

(2) 룰/별칭·태그 매칭:
{rule_ctx}

(3) 웹 검색 요약:
{web_ctx}

[질문]
{question}

[답변]
""").strip()
